<!DOCTYPE html>
<html data-theme="cupcake" lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="initial-scale=1.0" />
    <title>Buttercup</title>
    <link href="assets/css/daisyui-4.7.2.full.min.css" rel="stylesheet" type="text/css" />
    <script src="assets/js/tailwindcss.3.4.1.js"></script>
    <style type="text/css">
        body {
            width: 480px;
            height: 550px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .content-container {
            flex: 1;
            overflow-y: auto;
            padding: 0 1rem;
        }

        .form-control {
            width: 100%;
        }

        #buttons {
            grid-auto-flow: column !important;
        }

        .tab-content {
            padding-top: 1rem;
            width: 100%;
            display: block;
        }

        .api-input {
            width: 100%;
            margin-bottom: 0.5rem;
        }

        .footer {
            margin-top: auto;
        }

        /* Stabilize UI - prevent layout shifts */
        #video-info {
            min-height: 120px;
        }

        #transcript-actions {
            min-height: 60px;
        }

        /* Fix for statistics container */
        .bg-base-200.p-3.rounded-lg.mb-3 {
            min-height: 85px;
        }

        /* Prevent badge shifts */
        .badge {
            display: inline-flex !important;
            align-items: center !important;
            white-space: nowrap !important;
        }

        /* Stable button heights */
        .btn {
            min-height: 2rem !important;
        }

        /* Stable tab content */
        .tab-content.hidden {
            display: none !important;
        }
    </style>
</head>

<body>
    <div class="text-center pt-5 px-4">
        <h1 class="text-5xl font-bold">Buttercup</h1>
        <p class="text-sm pt-3 pb-3">
            AI-powered video transcription and translation for
            YouTube, Vimeo, and 1000+ sites using Whisper
        </p>
    </div>
    <div role="tablist" class="tabs tabs-boxed mx-auto w-full px-1" style="display: grid; grid-template-columns: repeat(7, minmax(0, 1fr)); font-size: 0.6rem; gap: 3px;">
        <a role="tab" class="tab tab-active" id="tab-general" style="padding: 0.4rem 0.4rem;">General</a>
        <a role="tab" class="tab" id="tab-transcript" style="padding: 0.4rem 0.4rem;">Transcript</a>
        <a role="tab" class="tab" id="tab-upload" style="padding: 0.4rem 0.4rem;">Upload</a>
        <a role="tab" class="tab" id="tab-batch" style="padding: 0.4rem 0.4rem;">Batch</a>
        <a role="tab" class="tab" id="tab-api" style="padding: 0.4rem 0.4rem;">API</a>
        <a role="tab" class="tab" id="tab-advanced" style="padding: 0.4rem 0.4rem;">Advanced</a>
        <a role="tab" class="tab" id="tab-logs" style="padding: 0.4rem 0.4rem;">Logs</a>
    </div>
    
    <div class="content-container">
        <!-- General Settings Tab -->
        <div id="general-tab" class="tab-content">
            <div class="divider">Settings</div>
            <div class="form-control">
                <label class="label cursor-pointer">
                    <span class="label-text">Enabled</span>
                    <input type="checkbox" class="toggle" id="enabled" checked />
                </label>
                <label class="label cursor-pointer" id="translate-container">
                    <span class="label-text">Translate everything to English</span>
                    <input type="checkbox" class="toggle" id="translate" />
                </label>
                <label class="label cursor-pointer">
                    <span class="label-text">Use cache database</span>
                    <input type="checkbox" class="toggle" id="cache" checked />
                </label>
                <label class="label cursor-pointer">
                    <span class="label-text">Download SRT</span>
                    <input type="checkbox" class="toggle" id="download" />
                </label>
                <label class="label cursor-pointer">
                    <span class="label-text">Auto-Transcribe on Video Load</span>
                    <input type="checkbox" class="toggle" id="auto-transcribe" />
                </label>
                <label class="label cursor-pointer">
                    <span class="label-text">Language</span>
                    <select class="select select-bordered" id="language">
                        <option value="auto">Auto-Detect</option>
                        <option value="af">Afrikaans</option>
                        <option value="sq">Albanian</option>
                        <option value="am">Amharic</option>
                        <option value="ar">Arabic</option>
                        <option value="hy">Armenian</option>
                        <option value="as">Assamese</option>
                        <option value="az">Azerbaijani</option>
                        <option value="ba">Bashkir</option>
                        <option value="eu">Basque</option>
                        <option value="be">Belarusian</option>
                        <option value="bn">Bengali</option>
                        <option value="bs">Bosnian</option>
                        <option value="br">Breton</option>
                        <option value="bg">Bulgarian</option>
                        <option value="my">Burmese</option>
                        <option value="yue">Cantonese</option>
                        <option value="ca">Catalan</option>
                        <option value="zh">Chinese</option>
                        <option value="hr">Croatian</option>
                        <option value="cs">Czech</option>
                        <option value="da">Danish</option>
                        <option value="nl">Dutch</option>
                        <option value="en">English</option>
                        <option value="et">Estonian</option>
                        <option value="fo">Faroese</option>
                        <option value="fi">Finnish</option>
                        <option value="fr">French</option>
                        <option value="gl">Galician</option>
                        <option value="ka">Georgian</option>
                        <option value="de">German</option>
                        <option value="el">Greek</option>
                        <option value="gu">Gujarati</option>
                        <option value="ht">Haitian Creole</option>
                        <option value="ha">Hausa</option>
                        <option value="haw">Hawaiian</option>
                        <option value="he">Hebrew</option>
                        <option value="hi">Hindi</option>
                        <option value="hu">Hungarian</option>
                        <option value="is">Icelandic</option>
                        <option value="id">Indonesian</option>
                        <option value="it">Italian</option>
                        <option value="ja">Japanese</option>
                        <option value="jw">Javanese</option>
                        <option value="kn">Kannada</option>
                        <option value="kk">Kazakh</option>
                        <option value="km">Khmer</option>
                        <option value="ko">Korean</option>
                        <option value="lo">Lao</option>
                        <option value="la">Latin</option>
                        <option value="lv">Latvian</option>
                        <option value="ln">Lingala</option>
                        <option value="lt">Lithuanian</option>
                        <option value="lb">Luxembourgish</option>
                        <option value="mk">Macedonian</option>
                        <option value="mg">Malagasy</option>
                        <option value="ms">Malay</option>
                        <option value="ml">Malayalam</option>
                        <option value="mt">Maltese</option>
                        <option value="mi">Maori</option>
                        <option value="mr">Marathi</option>
                        <option value="mn">Mongolian</option>
                        <option value="ne">Nepali</option>
                        <option value="no">Norwegian</option>
                        <option value="nn">Nynorsk</option>
                        <option value="oc">Occitan</option>
                        <option value="ps">Pashto</option>
                        <option value="fa">Persian</option>
                        <option value="pl">Polish</option>
                        <option value="pt">Portuguese</option>
                        <option value="pa">Punjabi</option>
                        <option value="ro">Romanian</option>
                        <option value="ru">Russian</option>
                        <option value="sa">Sanskrit</option>
                        <option value="sr">Serbian</option>
                        <option value="sn">Shona</option>
                        <option value="sd">Sindhi</option>
                        <option value="si">Sinhala</option>
                        <option value="sk">Slovak</option>
                        <option value="sl">Slovenian</option>
                        <option value="so">Somali</option>
                        <option value="es">Spanish</option>
                        <option value="su">Sundanese</option>
                        <option value="sw">Swahili</option>
                        <option value="sv">Swedish</option>
                        <option value="tl">Tagalog</option>
                        <option value="tg">Tajik</option>
                        <option value="ta">Tamil</option>
                        <option value="tt">Tatar</option>
                        <option value="te">Telugu</option>
                        <option value="th">Thai</option>
                        <option value="bo">Tibetan</option>
                        <option value="tr">Turkish</option>
                        <option value="tk">Turkmen</option>
                        <option value="uk">Ukrainian</option>
                        <option value="ur">Urdu</option>
                        <option value="uz">Uzbek</option>
                        <option value="vi">Vietnamese</option>
                        <option value="cy">Welsh</option>
                        <option value="yi">Yiddish</option>
                        <option value="yo">Yoruba</option>
                    </select>
                </label>
            </div>

            <div class="divider">Actions</div>
            <div class="form-control">
                <button class="btn btn-primary" id="start-transcription">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    Start Transcription
                </button>
                <p class="text-xs text-gray-500 mt-2">
                    Click to transcribe the current video. Captions will be available when complete.
                </p>
            </div>
        </div>

        <!-- Transcript Management Tab -->
        <div id="transcript-tab" class="tab-content hidden">
            <div class="divider">Current Video</div>
            <div class="form-control mb-4">
                <div id="video-info" class="bg-base-200 p-3 rounded-lg">
                    <p class="text-xs text-gray-500 mb-1">Video ID</p>
                    <p class="text-sm font-mono mb-2" id="current-video-id">Not on a video page</p>
                    <p class="text-xs text-gray-500 mb-1">Status</p>
                    <div class="flex items-center gap-2 mb-2">
                        <span id="transcript-status-badge" class="badge badge-sm badge-warning">No transcript</span>
                        <span id="transcript-date" class="text-xs text-gray-500"></span>
                    </div>
                    <div class="flex items-center gap-2 mb-2" id="caption-toggle-container" style="display: none;">
                        <span class="text-xs text-gray-500">Captions:</span>
                        <input type="checkbox" class="toggle toggle-sm toggle-success" id="caption-visibility-toggle" />
                        <span class="text-xs" id="caption-status-text">Visible</span>
                    </div>
                    <div class="flex items-center gap-2" id="summary-status-container" style="display: none;">
                        <span class="badge badge-sm badge-info">Has AI Summary</span>
                        <button class="btn btn-xs btn-ghost" id="show-existing-summary">View</button>
                        <button class="btn btn-xs btn-ghost text-error" id="delete-existing-summary" title="Delete Summary">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                            </svg>
                        </button>
                    </div>
                </div>
            </div>

            <div class="divider">Export Options</div>
            <div id="export-actions" class="form-control" style="opacity: 0.5;">
                <div class="grid grid-cols-2 gap-2 mb-2">
                    <button class="btn btn-sm btn-outline" id="export-srt" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                        </svg>
                        SRT
                    </button>
                    <button class="btn btn-sm btn-outline" id="export-vtt" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                        </svg>
                        VTT
                    </button>
                    <button class="btn btn-sm btn-outline" id="export-txt" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                        </svg>
                        TXT
                    </button>
                    <button class="btn btn-sm btn-outline" id="export-json" disabled>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                        </svg>
                        JSON
                    </button>
                </div>
                <button class="btn btn-sm btn-primary mb-2" id="copy-to-clipboard" disabled>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                    </svg>
                    Copy to Clipboard (Plain Text)
                </button>
            </div>

            <div class="divider">Transcript Management</div>
            <div id="transcript-actions" class="form-control" style="opacity: 0.5;">
                <button class="btn btn-sm btn-outline mb-2" id="view-edit-transcript" disabled>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
                    </svg>
                    View / Edit SRT
                </button>
                <button class="btn btn-sm btn-primary btn-outline mb-2" id="import-srt-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                    </svg>
                    Import SRT
                </button>
                <button class="btn btn-sm btn-error btn-outline mb-2" id="delete-transcript" disabled>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                    </svg>
                    Delete Transcript
                </button>
            </div>

            <!-- Import SRT Modal (Hidden) -->
            <dialog id="import-srt-modal" class="modal">
                <div class="modal-box">
                    <h3 class="font-bold text-lg mb-4">Import SRT Subtitles</h3>
                    <p class="text-sm text-gray-500 mb-3">Paste your SRT content below for the current video</p>

                    <textarea id="import-srt-textarea" class="textarea textarea-bordered w-full h-64 font-mono text-sm" placeholder="1
00:00:00,000 --> 00:00:05,000
First subtitle

2
00:00:05,000 --> 00:00:10,000
Second subtitle"></textarea>

                    <div id="import-srt-preview" class="hidden mt-2 bg-base-200 p-2 rounded text-sm">
                        <span class="font-bold">Preview:</span> <span id="import-srt-count">0</span> subtitles detected
                    </div>

                    <div class="modal-action">
                        <button class="btn btn-ghost" id="cancel-import-srt">Cancel</button>
                        <button class="btn btn-primary" id="confirm-import-srt">Import</button>
                    </div>
                </div>
                <form method="dialog" class="modal-backdrop">
                    <button>close</button>
                </form>
            </dialog>

            <div class="divider">AI Summary</div>
            <div class="form-control">
                <button class="btn btn-sm btn-primary" id="generate-summary" disabled style="opacity: 0.5;">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                    </svg>
                    Generate AI Summary
                </button>
                <p class="text-xs text-gray-500 mt-2">
                    Generate a summary with chapters. Requires transcript and LLM API setup.
                </p>
            </div>

            <div class="divider">Storage</div>
            <div class="form-control">
                <div class="bg-base-200 p-3 rounded-lg mb-3">
                    <div class="flex justify-between mb-1">
                        <span class="text-xs text-gray-500">Stored Transcripts</span>
                        <span class="text-xs font-mono" id="storage-count">0</span>
                    </div>
                    <div class="flex justify-between mb-1">
                        <span class="text-xs text-gray-500">Stored Summaries</span>
                        <span class="text-xs font-mono" id="storage-summary-count">0</span>
                    </div>
                    <div class="flex justify-between">
                        <span class="text-xs text-gray-500">Total Size</span>
                        <span class="text-xs font-mono" id="storage-size">0 KB</span>
                    </div>
                </div>
                <button class="btn btn-sm btn-primary w-full mb-2" id="view-all-transcripts">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 10h16M4 14h16M4 18h16" />
                    </svg>
                    View All Saved Transcripts
                </button>
                <button class="btn btn-sm btn-outline w-full mb-2" id="export-transcripts">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" />
                    </svg>
                    Export All Data
                </button>
                <button class="btn btn-sm btn-outline w-full" id="import-transcripts">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                    </svg>
                    Import Data
                </button>
                <input type="file" id="import-file-input" accept=".json" style="display: none;" />
            </div>
        </div>

        <!-- API Setup Tab -->
        <div id="api-tab" class="tab-content hidden">
            <div class="divider">Groq API Keys</div>
            <div class="form-control">
                <div id="groq-keys-container" class="space-y-2">
                    <!-- Keys will be added here dynamically -->
                </div>

                <button class="btn btn-sm btn-outline btn-primary mt-3 w-full" id="add-groq-key">
                    + Add Another Key
                </button>

                <div class="divider my-2"></div>

                <div class="form-control">
                    <label class="label cursor-pointer py-2">
                        <span class="label-text">Auto-rotate on rate limit</span>
                        <input type="checkbox" class="toggle toggle-sm toggle-primary" id="groq-auto-rotate" checked />
                    </label>
                    <p class="text-xs text-gray-500 ml-1 -mt-1">Switch to another key automatically when rate limited</p>
                </div>

                <div class="form-control">
                    <label class="label cursor-pointer py-2">
                        <span class="label-text">Smart key selection</span>
                        <input type="checkbox" class="toggle toggle-sm toggle-primary" id="groq-smart-selection" checked />
                    </label>
                    <p class="text-xs text-gray-500 ml-1 -mt-1">Choose key with most remaining quota</p>
                </div>

                <div class="alert alert-info text-xs mt-3 py-2">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-4 h-4"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <div class="text-xs">
                        <div class="font-bold mb-1">Multiple keys = More capacity:</div>
                        <div>‚Ä¢ 2 keys = 14,400s/h (4 hours audio)</div>
                        <div>‚Ä¢ 3 keys = 21,600s/h (6 hours audio)</div>
                        <div>‚Ä¢ Zero downtime on rate limits!</div>
                    </div>
                </div>

                <label class="label mt-3">
                    <span class="label-text">Groq Model</span>
                </label>
                <select class="select select-bordered select-sm w-full api-input" id="groq-model">
                    <option value="whisper-large-v3">whisper-large-v3 (Best quality, multilingual, translation)</option>
                    <option value="whisper-large-v3-turbo">whisper-large-v3-turbo (Faster, multilingual)</option>
                    <option value="distil-whisper-large-v3-en">distil-whisper-large-v3-en (Fastest, English only)</option>
                </select>
                <p class="text-xs text-gray-500 mt-1" id="model-translation-note">
                    Note: Only whisper-large-v3 supports translation
                </p>
            </div>

            <div class="divider">LLM Translation (Optional)</div>
            <div class="form-control">
                <label class="label cursor-pointer">
                    <span class="label-text">Enable LLM Translation</span>
                    <input type="checkbox" class="toggle" id="llm-translation-enabled" />
                </label>
                <p class="text-xs text-gray-500 mb-3">
                    Translate subtitles to your language using AI after transcription
                </p>

                <div id="llm-translation-settings" style="display: none;">
                    <label class="label">
                        <span class="label-text">Target Language</span>
                    </label>
                    <input type="text" placeholder="e.g., German, Spanish, French" class="input input-bordered w-full mb-3" id="llm-target-language" />

                    <label class="label">
                        <span class="label-text">LLM Provider</span>
                    </label>
                    <select class="select select-bordered w-full mb-3" id="llm-provider">
                        <option value="openai">OpenAI (GPT-4, GPT-3.5)</option>
                        <option value="gemini">Google Gemini</option>
                        <option value="claude">Anthropic Claude</option>
                        <option value="openrouter">OpenRouter</option>
                    </select>

                    <label class="label">
                        <span class="label-text">API Key</span>
                    </label>
                    <input type="password" placeholder="Enter your LLM API key" class="input input-bordered w-full mb-3" id="llm-api-key" />

                    <label class="label">
                        <span class="label-text">Model Name</span>
                    </label>
                    <input type="text" placeholder="e.g., gpt-4, gemini-pro, claude-3-opus" class="input input-bordered w-full mb-2" id="llm-model" />
                    <p class="text-xs text-gray-500 mt-1">
                        Examples: gpt-4, gpt-3.5-turbo, gemini-1.5-pro, claude-3-5-sonnet-20241022, anthropic/claude-3.5-sonnet
                    </p>
                </div>
            </div>

            <button class="btn btn-primary w-full mt-4 mb-4" id="save-api-settings">Save API Settings</button>
        </div>
        
        <!-- Advanced Settings Tab -->
        <div id="advanced-tab" class="tab-content hidden">
            <div class="divider">üé® Caption Customization</div>
            <div class="form-control">
                <label class="label">
                    <span class="label-text">Font Size (px)</span>
                    <span class="label-text-alt" id="font-size-value">22</span>
                </label>
                <input type="range" min="12" max="48" value="22" class="range range-sm range-primary" id="caption-font-size" />
                <div class="w-full flex justify-between text-xs px-2">
                    <span>12</span>
                    <span>24</span>
                    <span>36</span>
                    <span>48</span>
                </div>

                <label class="label mt-3">
                    <span class="label-text">Vertical Position (from bottom)</span>
                    <span class="label-text-alt" id="caption-vertical-value">15%</span>
                </label>
                <input type="range" min="0" max="50" value="15" class="range range-sm range-primary" id="caption-vertical-position" />
                <div class="w-full flex justify-between text-xs px-2">
                    <span>0% (Bottom)</span>
                    <span>25%</span>
                    <span>50% (Higher)</span>
                </div>

                <label class="label mt-3">
                    <span class="label-text">Horizontal Position</span>
                    <span class="label-text-alt" id="caption-horizontal-value">Center</span>
                </label>
                <select class="select select-bordered select-sm w-full" id="caption-horizontal-position">
                    <option value="center">Center</option>
                    <option value="left">Left</option>
                    <option value="right">Right</option>
                </select>

                <label class="label mt-3">
                    <span class="label-text">Font Color</span>
                </label>
                <div class="flex gap-2">
                    <input type="color" value="#ffffff" class="w-12 h-10 cursor-pointer" id="caption-font-color" />
                    <input type="text" value="#ffffff" class="input input-bordered input-sm flex-1" id="caption-font-color-text" />
                </div>

                <label class="label mt-3">
                    <span class="label-text">Background Color</span>
                </label>
                <div class="flex gap-2">
                    <input type="color" value="#080808" class="w-12 h-10 cursor-pointer" id="caption-bg-color" />
                    <input type="text" value="#080808" class="input input-bordered input-sm flex-1" id="caption-bg-color-text" />
                </div>

                <label class="label mt-3">
                    <span class="label-text">Background Opacity</span>
                    <span class="label-text-alt" id="caption-opacity-value">90%</span>
                </label>
                <input type="range" min="0" max="100" value="90" class="range range-sm range-primary" id="caption-bg-opacity" />
                <div class="w-full flex justify-between text-xs px-2">
                    <span>0%</span>
                    <span>50%</span>
                    <span>100%</span>
                </div>

                <label class="label mt-3">
                    <span class="label-text">Container Width (max width)</span>
                    <span class="label-text-alt" id="caption-width-value">80%</span>
                </label>
                <input type="range" min="30" max="100" value="80" step="5" class="range range-sm range-primary" id="caption-container-width" />
                <div class="w-full flex justify-between text-xs px-2">
                    <span>30%</span>
                    <span>65%</span>
                    <span>100%</span>
                </div>
                <p class="text-xs text-gray-500 mt-1">
                    Maximum width of the caption container. Lower values create narrower, more readable text blocks.
                </p>

                <div class="mt-4 p-3 bg-base-200 rounded-lg">
                    <p class="text-xs text-gray-500 mb-2">Preview:</p>
                    <div class="text-center">
                        <span id="caption-preview" style="display: inline-block; padding: 8px 16px; border-radius: 3px; background: rgba(8,8,8,0.9); color: #ffffff; font-size: 22px;">
                            Example Caption Text
                        </span>
                    </div>
                </div>
            </div>

            <div class="divider">üåô Dark Mode</div>
            <div class="form-control">
                <label class="label cursor-pointer">
                    <span class="label-text">Enable Dark Mode</span>
                    <input type="checkbox" class="toggle toggle-primary" id="dark-mode" />
                </label>
                <p class="text-xs text-gray-500 mt-1">
                    Toggle between light and dark theme for this popup
                </p>
            </div>

            <div class="divider">Word-Level Timestamps</div>
            <div class="form-control">
                <label class="label cursor-pointer">
                    <span class="label-text">Use word-level timestamps</span>
                    <input type="checkbox" class="toggle" id="use-word-timestamps" checked />
                </label>
                
                <div id="word-timestamp-settings">
                    <label class="label">
                        <span class="label-text">Words per line</span>
                    </label>
                    <input type="number" min="1" max="20" value="12" class="input input-bordered w-full mb-2" id="words-per-line" />
                    
                    <label class="label">
                        <span class="label-text">Words per line break</span>
                    </label>
                    <input type="number" min="0" max="20" value="8" class="input input-bordered w-full mb-2" id="max-line-length" />
                    <p class="text-xs text-gray-500 mt-1">
                        Number of words before inserting a line break. Set to 0 to disable line breaks.
                    </p>
                </div>
            </div>
            
            <div class="divider">Model Prompting</div>
            <div class="form-control mb-3">
                <label class="label">
                    <span class="label-text">Prompt for the model</span>
                </label>
                <textarea class="textarea textarea-bordered h-24" placeholder="Enter a prompt to guide the model's style or specify how to spell unfamiliar words" id="model-prompt" maxlength="896"></textarea>
                <p class="text-xs text-gray-500 mt-1">
                    Limited to 896 characters (recommended ~500). Use this to guide the model's style or specify how to spell unfamiliar words.
                </p>
            </div>

            <div class="divider">Transcription Parameters</div>
            <div class="form-control mb-3">
                <label class="label">
                    <span class="label-text">Temperature (0-1)</span>
                </label>
                <input type="number" min="0" max="1" step="0.1" value="0" class="input input-bordered w-full" id="temperature" />
                <p class="text-xs text-gray-500 mt-1">
                    Controls randomness. For transcriptions, 0 (default) is recommended for maximum accuracy.
                </p>
            </div>

            <div class="form-control mb-3">
                <label class="label">
                    <span class="label-text">Response Format</span>
                </label>
                <select class="select select-bordered w-full" id="response-format">
                    <option value="verbose_json">Verbose JSON (with timestamps)</option>
                    <option value="json">JSON</option>
                    <option value="text">Text only</option>
                </select>
                <p class="text-xs text-gray-500 mt-1">
                    Verbose JSON provides word-level timestamps and metadata. Required for word timestamps feature.
                </p>
            </div>

            <button class="btn btn-primary w-full mt-4 mb-4" id="save-advanced-settings">Save Advanced Settings</button>
        </div>

        <!-- Batch Processing Tab -->
        <div id="batch-tab" class="tab-content hidden">
            <div id="batch-ui-container"></div>
        </div>

        <!-- Logs Tab -->
        <div id="logs-tab" class="tab-content hidden">
            <div id="log-viewer-container"></div>
        </div>

        <!-- Upload Tab - Local File Transcription -->
        <div id="upload-tab" class="tab-content hidden">
            <div class="divider">Upload Local Files</div>

            <div class="alert alert-info mb-4">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                <span>Upload MP3, MP4, WAV, M4A, or WebM files for transcription. Files larger than 25MB will be automatically chunked.</span>
            </div>

            <!-- File Upload Section -->
            <div class="form-control w-full mb-4">
                <label class="label">
                    <span class="label-text">Select Audio/Video File</span>
                    <span class="label-text-alt">Max: 500MB</span>
                </label>
                <input type="file" id="upload-file-input" class="file-input file-input-bordered w-full" accept=".mp3,.mp4,.wav,.m4a,.webm,.ogg,.flac" />
            </div>

            <!-- File Info Display -->
            <div id="upload-file-info" class="hidden bg-base-200 p-3 rounded-lg mb-4">
                <div class="flex justify-between items-center mb-2">
                    <span class="font-bold">File:</span>
                    <span id="upload-file-name" class="text-sm">-</span>
                </div>
                <div class="flex justify-between items-center mb-2">
                    <span class="font-bold">Size:</span>
                    <span id="upload-file-size" class="text-sm">-</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="font-bold">Type:</span>
                    <span id="upload-file-type" class="text-sm">-</span>
                </div>
            </div>

            <!-- Progress Section -->
            <div id="upload-progress-section" class="hidden mb-4">
                <div class="flex justify-between mb-2">
                    <span class="text-sm font-bold">Progress</span>
                    <span id="upload-progress-text" class="text-sm">0%</span>
                </div>
                <progress id="upload-progress-bar" class="progress progress-primary w-full" value="0" max="100"></progress>
                <div id="upload-status-text" class="text-sm mt-2 text-center">Initializing...</div>
            </div>

            <!-- Action Buttons -->
            <div class="flex gap-2 mb-4">
                <button id="upload-transcribe-btn" class="btn btn-primary flex-1" disabled>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
                    </svg>
                    Transcribe
                </button>
                <button id="upload-cancel-btn" class="btn btn-error" disabled>Cancel</button>
            </div>

            <!-- Recent Uploads List -->
            <div class="divider">Recent Uploads</div>
            <div id="upload-recent-list" class="space-y-2">
                <p class="text-sm text-center text-gray-500">No uploads yet</p>
            </div>
        </div>

        <!-- Upload Transcript Viewer Modal -->
        <dialog id="upload-transcript-modal" class="modal">
            <div class="modal-box max-w-4xl">
                <h3 class="font-bold text-lg mb-4">
                    üìÅ <span id="upload-transcript-title">Transcript</span>
                </h3>

                <div class="bg-base-200 p-2 rounded mb-3 flex justify-between items-center">
                    <span class="text-sm">
                        <span class="font-bold">Source:</span> Local Upload
                    </span>
                    <button class="btn btn-xs btn-primary" id="copy-upload-transcript">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />
                        </svg>
                        Copy SRT
                    </button>
                </div>

                <textarea id="upload-transcript-content" class="textarea textarea-bordered w-full h-96 font-mono text-sm" readonly></textarea>

                <div class="modal-action">
                    <button class="btn" id="close-upload-transcript">Close</button>
                </div>
            </div>
            <form method="dialog" class="modal-backdrop">
                <button>close</button>
            </form>
        </dialog>
    </div>
</body>

<script src="video-id-utils.js"></script>
<script src="batch-ui.js"></script>
<script src="log-viewer.js"></script>
<script src="file-upload.js"></script>
<script src="srt-import.js"></script>
<script src="assets/js/groq-key-manager.js"></script>
<script src="assets/js/buttons.js"></script>

</html>